{{define "index"}}<!doctype html>
<html lang="en">
<head>
  <link rel="stylesheet" href="./static/font/Font-Awesome/css/font-awesome.min.css">
  <!--link rel="stylesheet" href="https://openlayers.org/en/v4.1.1/css/ol.css" type="text/css"-->
  <style>
    .map {
      height: 100%;
      width: 100%;
    }

    div.tooltip {
      position: absolute;
      text-align: center;
      width: 160px;
      height: 28px;
      padding: 2px;
      font: 12px sans-serif;
      background: lightsteelblue;
      border: 0px;
      border-radius: 8px;
      pointer-events: none;
    }
  </style>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/semantic.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/reset.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/site.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/grid.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/icon.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/input.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/button.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/divider.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/label.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/dropdown.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/transition.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/components/popup.css">
  <link rel="stylesheet" type="text/css" href="./static/js/Semantic-UI/dist/semantic.min.css" />

  <script type="text/javascript" src="./static/js/jquery-3.1.1.min.js"></script>

  <script type="text/javascript" src="./static/js/iframe.js"></script>
  <script type="text/javascript" src="./static/js/Semantic-UI/dist/components/popup.js"></script>
  <script type="text/javascript" src="./static/js/Semantic-UI/dist/components/dropdown.js"></script>
  <script type="text/javascript" src="./static/js/Semantic-UI/dist/components/transition.js"></script>
  <script type="text/javascript" src="./static/js/Semantic-UI/dist/semantic.min.js"></script>

  <link rel="stylesheet" href="/static/js/Leaflet.draw/docs/examples/libs/leaflet.css" />
  <link rel="stylesheet" href="./static/js/Leleaflet/getProximidades.goaflet.draw/dist/leaflet.draw.css" />

  <script src="/static/js/Leaflet.draw/docs/examples/libs/leaflet-src.js"></script>

  <script src="./static/js/Leaflet.draw/src/Leaflet.draw.js"></script>
  <script src="./static/js/Leaflet.draw/src/Leaflet.Draw.Event.js"></script>

  <script src="./static/js/Leaflet.draw/src/edit/handler/Edit.Poly.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/handler/Edit.SimpleShape.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/handler/Edit.Circle.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/handler/Edit.Rectangle.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/handler/Edit.Marker.js"></script>

  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.Feature.js"></script>
  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.Polyline.js"></script>
  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.Polygon.js"></script>
  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.SimpleShape.js"></script>
  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.Rectangle.js"></script>
  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.Circle.js"></script>
  <script src="./static/js/Leaflet.draw/src/draw/handler/Draw.Marker.js"></script>

  <script src="./static/js/Leaflet.draw/src/ext/TouchEvents.js"></script>
  <script src="./static/js/Leaflet.draw/src/ext/LatLngUtil.js"></script>
  <script src="./static/js/Leaflet.draw/src/ext/GeometryUtil.js"></script>
  <script src="./static/js/Leaflet.draw/src/ext/LineUtil.Intersect.js"></script>
  <script src="./static/js/Leaflet.draw/src/ext/Polyline.Intersect.js"></script>
  <script src="./static/js/Leaflet.draw/src/ext/Polygon.Intersect.js"></script>

  <script src="./static/js/Leaflet.draw/src/Control.Draw.js"></script>
  <script src="./static/js/Leaflet.draw/src/Tooltip.js"></script>
  <script src="./static/js/Leaflet.draw/src/Toolbar.js"></script>

  <script src="./static/js/Leaflet.draw/src/draw/DrawToolbar.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/EditToolbar.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/handler/EditToolbar.Edit.js"></script>
  <script src="./static/js/Leaflet.draw/src/edit/handler/EditToolbar.Delete.js"></script>

  <script src="./static/js/Leaflet.draw/docs/examples/libs/leaflet.snap.js"></script>
  <script src="/static/js/Leaflet.draw/docs/examples/libs/leaflet.geometryutil.js"></script>

  <script src="//d3js.org/d3.v4.min.js" charset="utf-8"></script>
  <script src="https://d3js.org/topojson.v1.min.js"></script>

  <script src="./static/js/visual.cue.d3js/util.js"></script>
  <script src="./static/js/visual.cue.d3js/visualCuePie.js"></script>
  <title>OpenLayers example</title>


  <style>
    #map {
      width: 100%;
      height: 100%;
    }

    svg {
      position: relative;
    }

    .smallButton{
      width:29px !important;
      height: 33px !important;
    }
    .smallButton.borda{
      border: #bebebe !important;
      border-style: solid !important;
      border-width: 0.5px 0px 0.5px 0px !important;
    }
    .ui.search {
      font-size: 0.9em;
    }
    .ui.popup > .ui.search > .results > .category  {
      width: 100%;
    }
    .ui.popup > .ui.search > .results > .category > .result  {
      width: 249px;
      height: 100%;
      text-align: left;
    }
    .ui.popup {
      width: 265px;
    }
    .ui.popup > .ui.dropdown {
      width: 35px;
      height: 34px;
      float: left;
      border-radius: 500rem 0rem 0rem 500rem !important;
    }
    .ui.popup > .ui.search {
      float: left;
    }
    .ui.popup > .ui.search > .input > .prompt {
      border-radius: 0rem 500rem 500rem 0rem !important;
    }

  </style>
</head>
<body>
<div id="d31"></div>
<div id="d32"></div>
<div id="map" class="map"></div>
<script type="text/javascript">
  var map;
  var transform;
  var path;
  var collectionGlobal;
  var svg1,svg2;
  var g1, g2;
  var feature;
  var polygon;

  var getPointsEventOkPositive = false;

  function uniqueId() {
    var id = new Date().getTime().toString(16);

    id = id.concat( Math.floor((1 + Math.random()) * 0xFFFFFFFFFFFFF).toString(16) );
    id = id.concat( Math.floor((1 + Math.random()) * 0xFFFFFF).toString(16) );

    return id
  }

  var empresas;
  var batidas;

  var dataToSend = {
    PointsList: [],
    Type: []
  };

  function getBatidas ( map ){
    $.ajax({
      type: "POST",
      url: "./getBatidas/",
      data: JSON.stringify( dataToSend ),
      success: function( data ){
        console.log( "data:", data );
        for( var i in data.Objects ){

          var t = '<div class="ui cards">' +
            '<div class="card">' +
            '<div class="content">' +
            '<img class="right floated mini ui image" src="./static/images/elliot.jpg">' +
            '<div class="header">' +
            data.Objects[i].Nome +
            '</div>' +
            '<div class="meta">' +
            'Empresa: ' +
            data.Objects[i].Empresa +
            ' Matricula:  ' +
            data.Objects[i].Matricula +
            '</div>' +
            '<div class="description">' +
            data.Objects[i].Date +
            '</div>' +
            '</div>' +
            '<div class="extra content">' +
            '<div class="ui two buttons">' +
            '<div class="ui basic blue button">Empresas</div>' +
            '<div class="ui basic blue button">Proximidades</div>' +
            '</div>' +
            '</div>' +
            '</div>';
          var LeafIcon = L.Icon.extend({
            options: {
              shadowUrl: './static/js/Leaflet.draw/docs/examples/libs/images/marker-shadow.png'
            }
          });

          var greenIcon = new LeafIcon({iconUrl: './static/js/Leaflet.draw/docs/examples/libs/images/marker-icon-red.png'});
          L.marker([data.Objects[i].Loc[1], data.Objects[i].Loc[0]], {icon: greenIcon}).bindPopup(t).addTo(map);
        }

        $('.addPoint').removeClass('disabled');

        if( getPointsEventOkPositive == false ) {
          $('.getPointsEventOk').modal('show');

          $('.getPointsEventOkPositive').click(function () {
            getPointsEventOkPositive = true;
            //console.log("getPointsEventOkPositive:",getPointsEventOkPositive);
          });
        }
      },
      dataType: "json"
    });
  }

  function getPoints ( map ){
    $.ajax({
      type: "POST",
      //url: "./getPoints/",
      url: "./getPro/",
      data: JSON.stringify( dataToSend ),
      success: function( data ){
        console.log( "data:", data );
        for( var i in data.Objects ){

          var text = "";

          for( var t in data.Objects[i].Tag ){
            text += "<b>" + t + ":</b> " + data.Objects[i].Tag[t] + "<br>";
            //console.log( t, data.Objects[i].Tag[t] );
          }


          var t = '<div class="ui cards">' +
            '<div class="card">' +
            '<div class="content">' +
            '<img class="right floated mini ui image" src="./static/images/elliot.jpg">' +
            '<div class="header">' +
            'Elliot Fu' +
            '</div>' +
            '<div class="meta">' +
            'Friends of Veronika' +
            '</div>' +
            '<div class="description">' +
            'Elliot requested permission to view your contact details' +
            '</div>' +
            '</div>' +
            '<div class="extra content">' +
            '<div class="ui two buttons">' +
            '<div class="ui basic blue button">Approve</div>' +
            '<div class="ui basic blue button">Decline</div>' +
            '</div>' +
            '</div>' +
            '</div>';
          L.marker([data.Objects[i].Loc[1], data.Objects[i].Loc[0]]).bindPopup(text).addTo(map);
        }

        if( getPointsEventOkPositive == false ) {
          $('.getPointsEventOk').modal('show');

          $('.getPointsEventOkPositive').click(function () {
            getPointsEventOkPositive = true;
            //console.log("getPointsEventOkPositive:",getPointsEventOkPositive);
          });
        }
      },
      dataType: "json"
    });
  }

  // Reposition the SVG to cover the features.
  function reset() {return
    var bounds = path.bounds(collectionGlobal),
      topLeft = bounds[0],
      bottomRight = bounds[1];

    svg2 .attr("width", bottomRight[0] - topLeft[0])
    .attr("height", bottomRight[1] - topLeft[1])
    .style("left", topLeft[0] + "px")
    .style("top", topLeft[1] + "px");

    g1   .attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")");

    feature.attr("d", path);
  }

  // Use Leaflet to implement a D3 geometric transformation.
  function projectPoint(x, y) {
    var point = map.latLngToLayerPoint(new L.LatLng(y, x));
    this.stream.point(point.x, point.y);
  }

  function onMapEvent( event, type ){
    console.log( "event:", event );
    console.log( "type:", type );
    console.log( "dataToSend:", dataToSend )
  }

  function projectPoint(x, y) {
    var point = map.latLngToLayerPoint(new L.LatLng(y, x));
    this.stream.point(point.x, point.y);
  }


  $( document ).ready(
    function() {

      // tradução
      // https://leaflet.github.io/Leaflet.draw/docs/leaflet-draw-latest.html
      L.drawLocal = {
        draw: {
          toolbar: {
            actions: {
              title: 'Cancelar o desenho',
              text: 'Cancelar'
            },
            finish: {
              title: 'Terminar o desenho',
              text: 'Terminar'
            },
            undo: {
              title: 'Apagar o último ponto adicionado',
              text: 'Apagar o último ponto'
            },
            buttons: {
              polyline: 'Desenhar uma linha',
              polygon: 'Desenhar um polígono',
              rectangle: 'Desenhar um retangulo',
              circle: 'Desenhar um círculo',
              marker: 'Adicionar uma marca'
            }
          },
          handlers: {
            circle: {
              tooltip: {
                start: 'Clique e arraste para desenhar um círculo'
              },
              radius: 'Radianos'
            },
            marker: {
              tooltip: {
                start: 'Clique no mapa para adicionar uma marca'
              }
            },
            polygon: {
              tooltip: {
                start: 'Clique para começar a desenhar o polígono',
                cont: 'Clique no próximo ponto para continuar',
                end: 'Clique no próximo ponto para continuar, ou em cima do primeiro ponto adicionado para terminar'
              }
            },
            polyline: {
              error: '<strong>Erro:</strong> as linhas que formam o polígono não podem se cruzar',
              tooltip: {
                start: 'Clique para começar a desenhar uma linha',
                cont: 'Clique no próximo ponto para continuar',
                end: 'Clique no próximo ponto para continuar, ou em cima do último ponto adicionado para terminar'
              }
            },
            rectangle: {
              tooltip: {
                start: 'Clique e arraste para desenhar um retângulo'
              }
            },
            simpleshape: {
              tooltip: {
                end: 'Solte o mouse para parar de desenhar'
              }
            }
          }
        },
        edit: {
          toolbar: {
            actions: {
              save: {
                title: 'Salvar as mudanças',
                text: 'Salvar'
              },
              cancel: {
                title: 'Cancelar a edição e apagar todas as mudanças',
                text: 'Cancelar'
              }
            },
            buttons: {
              edit: 'Editar',
              editDisabled: 'Não há o que editar',
              remove: 'Apagar',
              removeDisabled: 'Não há o que apagar'
            }
          },
          handlers: {
            edit: {
              tooltip: {
                text: 'Arraste os pontos ou a marca para editar',
                subtext: 'Clique em cancelar para desfazer'
              }
            },
            remove: {
              tooltip: {
                text: 'Clique no desenho ou na marca para remover'
              }
            }
          }
        }
      };

      // cria o mapa
      var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        osm = L.tileLayer(osmUrl, {maxZoom: 19, attribution: osmAttrib});
        map = new L.Map('map', {layers: [osm], center: new L.LatLng( -27.439052, -48.495719 ), zoom: 13 });

      svg1 = d3.select(map.getPanes().overlayPane).append("svg");
      g1 = svg1.append("g").attr("class", "leaflet-zoom-hide");

      svg2 = d3.select(map.getPanes().overlayPane).append("svg");
      g2 = svg1.append("g").attr("class", "leaflet-zoom-hide");


      d3.json("./js", function(error, collection) {
        if (error) throw error;

        //collectionGlobal = collection;

        transform = d3.geoTransform({point: projectPoint});
        path = d3.geoPath().projection(transform);

      feature = g1.selectAll("path")
        .data(collection.features)
        .enter().append("path")
      .attr( "fill", "#ff0000" )
      .attr( "fill-opacity", 0.02 )
      //.attr( "stroke-width", 2 )
      .attr( "stroke", "#FF0000" );
      //.attr( "opacity", 1 );

        //map.on("viewreset", reset);
        //reset();

        var bounds = path.bounds(collection),
          topLeft = bounds[0],
          bottomRight = bounds[1];

        svg1.attr("width", bottomRight[0] - topLeft[0])
        .attr("height", bottomRight[1] - topLeft[1])
        .style("left", topLeft[0] + "px")
        .style("top", topLeft[1] + "px");

        g1.attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")");

        feature.attr("d", path);


      });

      d3.json("./jsHull", function(error, collection) {
        if (error) throw error;

        //collectionGlobal = collection;

        transform = d3.geoTransform({point: projectPoint});
        path = d3.geoPath().projection(transform);

        feature = g2.selectAll("path")
        .data(collection.features)
        .enter().append("path")
        .attr( "fill", "#000000" )
        .attr( "fill-opacity", 0.02 )
        //.attr( "stroke-width", 2 )
        .attr( "stroke", "#000000" );
        //.attr( "opacity", 1 );

        //map.on("viewreset", reset);
        //reset();

        var bounds = path.bounds(collection),
          topLeft = bounds[0],
          bottomRight = bounds[1];

        svg2.attr("width", bottomRight[0] - topLeft[0])
        .attr("height", bottomRight[1] - topLeft[1])
        .style("left", topLeft[0] + "px")
        .style("top", topLeft[1] + "px");

        g2.attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")");

        feature.attr("d", path);


      });


      var setupLocal = {
        //element: document.getElementById( "d32" ),
        element: map.getPanes().overlayPane,
        mainIconSize: 40,
        mainIcon: "\uf21c",
        radiusOuterPx: 100,
        radiusInnerPx: 50,
        mainIconDX: -25,
        mainIconDY: -20
      };
      var dataLocal = [
        { percentual: 33, icon: '\uf2c8', status: "temperatura", background: "#ff0000", color: "#FFFFFF", size: 30, dx:   0, dy:  0 },
        { percentual: 33, icon: '\uf2a3', status: "mãos",        background: "#00ff00", color: "#FFFFFF", size: 30, dx: -14, dy: -12 },
        { percentual: 33, icon: '\uf243', status: "bateria",     background: "#0000ff", color: "#FFFFFF", size: 20, dx: -14, dy:  0 }
      ];

      //var c = visualCuePieLikeElement( setupLocal, dataLocal );

      // barra de ferramentas
      //var drawnItems = new L.FeatureGroup();
      //map.addLayer( drawnItems );

      // Barra personalizada
      /*var optionsControl =  L.Control.extend({
        options: {
          position: 'topleft'
        },
        onAdd: function (map) {
          var container = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom ui small vertical icon buttons');
          $(container).html('<button class="ui basic button smallButton relatroio"><i class="Search icon iconMapSearch"></i></button>' +
            '<button class="ui basic button smallButton cadastro"><i class="flag icon"></i></button>');
          container.style.backgroundColor = '#fafafa';
          return container;
        }
      });
      map.addControl( new optionsControl() );

      // Barra personalizada
      var optionsControl =  L.Control.extend({
        options: {
          position: 'topleft'
        },
        onAdd: function (map) {
          var container = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom ui small vertical icon buttons');
          $(container).html('<button class="ui basic button smallButton relatroio"><i class="Search icon"></i></button>' +
            '<button class="ui basic button iconMapSearch smallButton borda cadastro"><i class="flag icon"></i></button><button class="ui basic button iconMapSearch smallButton cadastro"><i class="flag icon"></i></button>');
          container.style.backgroundColor = '#fafafa';
          return container;
        }
      });
      map.addControl( new optionsControl() );

      // Barra de desenho
      var drawControl = new L.Control.Draw({
        position: 'topleft',
        edit: {
          featureGroup: drawnItems,
          remove: true
        }
      });


      //
      var guideLayers = [];
      drawControl.setDrawingOptions({
        polyline: { guideLayers: guideLayers },
        polygon: { guideLayers: guideLayers, snapDistance: 3 }
      });

      map.addControl(drawControl);

      // Prepara os desenhos do mapa para envio
      // Polygon; Rectangle; Circle; Marker | String Layer that was just created. The type of layer this is. One of:
      // polyline; polygon; rectangle; circle; marker Triggered when a new vector or marker has been created.
      map.on('draw:created', function(e) {
        //map.on(L.Draw.Event.CREATED, function (e) {
        var type = e.layerType,
          layer = e.layer;

        //https://en.wikipedia.org/wiki/GeoJSON
        var geoData = layer.toGeoJSON();
        var inputCoordinates;
        var coordinateList = [];

        if ( type == "polygon" ) {
          inputCoordinates = geoData.geometry;

          for( var i in inputCoordinates.coordinates ){
            for( var c in inputCoordinates.coordinates[i] ){
              coordinateList.push([
                inputCoordinates.coordinates[i][c][0],
                inputCoordinates.coordinates[i][c][1]
              ]);
            }
          }
        }
        else if ( type == "marker" ) {
          inputCoordinates = geoData.geometry.coordinates;
          coordinateList = [
            inputCoordinates[0],
            inputCoordinates[1]
          ];
        }
        else if ( type == "rectangle" ) {
          inputCoordinates = geoData.geometry.coordinates[0];

          //<bottom left coordinates>
          coordinateList.push([
            inputCoordinates[0][0],
            inputCoordinates[0][1]
          ]);
          //<upper right coordinates>
          coordinateList.push([
            inputCoordinates[2][0],
            inputCoordinates[2][1]
          ]);
        }
        else if ( type == "polyline" ) {
          coordinateList = geoData.geometry.coordinates;
        }
        else if ( type == "circle" ) {
          coordinateList = [
            geoData.geometry.coordinates[0],
            geoData.geometry.coordinates[1],
            layer.options.radius
          ];
        }

        dataToSend.PointsList.push( coordinateList );
        dataToSend.Type.push( type );

        onMapEvent( 'added', type );

        drawnItems.addLayer(layer);
      });

      map.on('click', function(e) {

      });
      */
      map.on('zoomlevelschange', function( Event ) {
        onMapEvent( Event, 'zoomlevelschange' );
      });

      map.on('resize', function( ResizeEvent ) {
        onMapEvent( ResizeEvent, 'resize' );
      });

      map.on('unload', function( Event ) {
        onMapEvent( Event, 'unload' );
      });

      map.on('viewreset', function( Event ) {
        onMapEvent( Event, 'viewreset' );
      });

      map.on('load', function( Event ) {
        onMapEvent( Event, 'load' );
      });

      map.on('zoomstart', function( Event ) {
        onMapEvent( Event, 'zoomstart' );
        reset();
      });

      map.on('movestart', function( Event ) {
        onMapEvent( Event, 'movestart' );
      });

      map.on('zoom', function( Event ) {
        onMapEvent( Event, 'zoom' );
        reset();
      });

      map.on('move', function( Event ) {
        onMapEvent( Event, 'move' );
        reset();
      });

      map.on('zoomend', function( Event ) {
        onMapEvent( Event, 'zoomend' );
        reset();
      });

      map.on('moveend', function( Event ) {
        onMapEvent( Event, 'moveend' );
        reset();
      });

      // List of all layers just edited on the map. Triggered when layers in the FeatureGroup; initialised with the
      // plugin; have been edited and saved.
      map.on('draw:edited', function(e) {

      });

      // List of all layers just removed from the map. Triggered when layers have been removed (and saved) from the
      // FeatureGroup.
      map.on('draw:deleted', function(e) {

      });

      // The type of layer this is. One of:polyline; polygon; rectangle; circle; marker Triggered when the user has
      // chosen to draw a particular vector or marker.
      map.on('draw:drawstart', function(e) {

      });

      // The type of layer this is. One of: polyline; polygon; rectangle; circle; marker Triggered when the user has
      // finished a particular vector or marker.
      map.on('draw:drawstop', function(e) {

      });

      // List of all layers just being added from the map. Triggered when a vertex is created on a polyline or
      // polygon.
      map.on('draw:drawvertex', function(e) {

      });

      // The type of edit this is. One of: edit Triggered when the user starts edit mode by clicking the edit tool
      // button.
      map.on('draw:editstart', function(e) {

      });

      // Layer that was just moved. Triggered as the user moves a rectangle; circle or marker.
      map.on('draw:editmove', function(e) {

      });

      // Layer that was just moved. Triggered as the user resizes a rectangle or circle.
      map.on('draw:editresize', function(e) {

      });

      // List of all layers just being edited from the map. Triggered when a vertex is edited on a polyline or
      // polygon.
      map.on('draw:editvertex', function(e) {

      });

      // The type of edit this is. One of: edit Triggered when the user has finshed editing (edit mode) and saves
      // edits.
      map.on('draw:editstop', function(e) {

      });

      // The type of edit this is. One of: remove Triggered when the user starts remove mode by clicking the remove
      // tool button.
      map.on('draw:deletestart', function(e) {

      });

      // The type of edit this is. One of: remove Triggered when the user has finished removing shapes (remove mode)
      // and saves.
      map.on('draw:deletestop', function(e) {

      });
      /*
      $( ".getPoints" ).click(function() {
        $('.ui.sidebar').sidebar('hide');
        //$(".leaflet-draw-draw-polygon").show();
        drawControl._toolbars[L.DrawToolbar.TYPE]._modes.polygon.handler.enable()
      });

      $( ".viewBatidas" ).click(function() {
        $('.ui.sidebar').sidebar('hide');
        getBatidas( map );
      });

      $( ".viewPoints" ).click(function() {
        $('.ui.sidebar').sidebar('hide');

        getPoints( map );
      });

      $('.accordion').accordion({selector: {trigger: '.title'}});*/
    });

</script>
<script src="./static/js/visual.cue.d3js/apagar.js"></script>
</body>
</html>{{end}}